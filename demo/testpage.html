<html>
<head>
    <title>TestPage for dMap</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
    integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
    crossorigin=""/>
    <script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
    integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
    crossorigin=""></script>
    <!-- <script src="../src/deps/snap.svg-min.js"></script>
    <script src="../src/layers/heatmap/heatmap.js"></script> -->
</head>
<body>
    <h2 style="text-align: center;">This is TestPage for dMap</h2>
    <div id="map" style="height: 100%;"></div>
    <!-- <script src="../builds/dmap-dist.js"></script> -->
    <script src="test.js"></script>
    <script src="../src/layers/Geojson.js"></script>
    <!-- <script>
        var map = L.map('map').setView([39.74739, -105], 13);
    
        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.light'
        }).addTo(map);
    
        function onEachFeature(feature, layer) {
            var popupContent = "<p>I started out as a GeoJSON " +
                    feature.geometry.type + ", but now I'm a Leaflet vector!</p>";
    
            if (feature.properties && feature.properties.popupContent) {
                popupContent += feature.properties.popupContent;
            }
    
            layer.bindPopup(popupContent);
        }
    
        L.geoJSON([bicycleRental, campus], {
    
            style: function (feature) {
                return feature.properties && feature.properties.style;
            },
    
            onEachFeature: onEachFeature,
    
            pointToLayer: function (feature, latlng) {
                return L.circleMarker(latlng, {
                    radius: 8,
                    fillColor: "#ff7800",
                    color: "#000",
                    weight: 1,
                    opacity: 1,
                    fillOpacity: 0.8
                });
            }
        }).addTo(map);
    
        // L.geoJSON(freeBus, {
    
        //     filter: function (feature, layer) {
        //         if (feature.properties) {
        //             // If the property "underConstruction" exists and is true, return false (don't render features under construction)
        //             return feature.properties.underConstruction !== undefined ? !feature.properties.underConstruction : true;
        //         }
        //         return false;
        //     },
    
        //     onEachFeature: onEachFeature
        // }).addTo(map);
    </script> -->

    <script type="text/javascript">

        var map = L.map('map').setView([37.8, -96], 4);

        L.tileLayer('https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6ImNpejY4NXVycTA2emYycXBndHRqcmZ3N3gifQ.rJcFIG214AriISLbB6B5aw', {
            maxZoom: 18,
            attribution: 'Map data &copy; <a href="https://www.openstreetmap.org/">OpenStreetMap</a> contributors, ' +
                '<a href="https://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
                'Imagery © <a href="https://www.mapbox.com/">Mapbox</a>',
            id: 'mapbox.light'
        }).addTo(map);

        // get color depending on population density value
        function getColor(d) {
            return d > 1000 ? '#800026' :
                    d > 500  ? '#BD0026' :
                    d > 200  ? '#E31A1C' :
                    d > 100  ? '#FC4E2A' :
                    d > 50   ? '#FD8D3C' :
                    d > 20   ? '#FEB24C' :
                    d > 10   ? '#FED976' :
                                '#FFEDA0';
        }

        function style(feature) {
            return {
                weight: 2,
                opacity: 1,
                color: 'white',
                dashArray: '3',
                fillOpacity: 0.7,
                fillColor: getColor(feature.properties.density)
            };
        }
        
        // function onEachFeature(feature, layer) {
        //     layer.on("click", function() {
        //         var popupContent = "<p>My name is " +
        //             feature.properties.name + "</p>";
        //         console.log(popupContent);
        //         layer.bindPopup(popupContent).openPopup();
        //         }, this);
        // }
        function trig(layer,feature){
            var popupContent = "<p>My name is " +
                feature.properties.name + "</p>";
            // console.log(popupContent)
            layer.bindPopup(popupContent).openPopup();
        }
        
        // mygeo = L.geoJSON(statesData, {style: style}).addTo(map);
        mygeo = new GeoJson(statesData, {style: style}).addTo(map);
        mygeo.on("click",trig)       //mouseover,click
    </script>

</body>